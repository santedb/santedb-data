/** 
 * <feature scope="SanteDB.Persistence.Data" id="00010000-04" name="Data Initialization" invariantName="sqlite">
 *	<summary>Initialize Data</summary>
 *	<remarks>Initializes the SanteDB database with default usernames, passwords, and applications</remarks>
 *	<isInstalled>SELECT COUNT(1) = 1 FROM SEC_USR_TBL WHERE USR_NAME = 'Administrator'</isInstalled>
 * </feature>
 */
 DELETE FROM SEC_USR_ROL_ASSOC_TBL WHERE USR_ID IN (SELECT USR_ID FROM SEC_USR_TBL WHERE USR_NAME IN ('Bob','Allison', 'SyncUser', 'Administrator'));
DELETE FROM SEC_USR_TBL WHERE USR_NAME IN ('Bob','Allison', 'SyncUser', 'Administrator');
DELETE FROM SEC_APP_POL_ASSOC_TBL WHERE APP_ID IN (SELECT APP_ID FROM SEC_APP_TBL WHERE APP_PUB_ID = 'fiddler');
DELETE FROM SEC_APP_TBL WHERE APP_PUB_ID = 'fiddler';

INSERT INTO SEC_USR_TBL (USR_NAME, SEC_STMP, PASSWD, EMAIL, PHN_NUM, EMAIL_CNF, PHN_CNF, CRT_PROV_ID)
	VALUES ('Administrator', randomblob(16), '59ff5973691ff75f8baa45f1e38fae24875f77ef00987ed22b02df075fb144f9', 'administrator@marc-hi.ca', 'tel:+19055751212;ext=4085', TRUE, TRUE, x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
	
INSERT INTO ent_tbl (ent_id) 
	VALUES (x'36085FB5E640E24E952227E3F8BFE532');
	
INSERT INTO ent_vrsn_tbl(ent_vrsn_id, ent_id, sts_cd_id, CRT_PROV_ID, CLS_CD_ID, DTR_CD_ID, head) 
	VALUES (x'C1FFFAAB2150FD40A8E69B290F34EAD7', x'36085FB5E640E24E952227E3F8BFE532', x'BD4C06C806FA3045B4301A52F1530C27', x'76A0DCFA90366E4AAF9EF1CD68E8C7E8', x'46A8E29DF2DDBC4E902E84508C5089EA', x'DE089FF2A7785E4AAEAF7B545BA19A09', true);
	
INSERT INTO psn_tbl (ent_vrsn_id) VALUES (x'C1FFFAAB2150FD40A8E69B290F34EAD7');
INSERT INTO usr_ent_tbl (ent_vrsn_id, sec_usr_id) SELECT x'C1FFFAAB2150FD40A8E69B290F34EAD7', usr_id FROM sec_usr_tbl WHERE usr_name = 'Administrator';

INSERT INTO SEC_USR_ROL_ASSOC_TBL (USR_ID, ROL_ID)
	SELECT USR_ID, ROL_ID FROM SEC_USR_TBL, SEC_ROL_TBL 
	WHERE SEC_USR_TBL.USR_NAME = 'Administrator' AND SEC_ROL_TBL.ROL_Name IN ('ADMINISTRATORS');
	
INSERT INTO SEC_USR_TBL (USR_NAME, SEC_STMP, PASSWD, EMAIL, PHN_NUM, EMAIL_CNF, PHN_CNF, CRT_PROV_ID)
	VALUES ('Bob', randomblob(16), '59ff5973691ff75f8baa45f1e38fae24875f77ef00987ed22b02df075fb144f9', 'bob@marc-hi.ca', 'tel:+19055751212;ext=4085', TRUE, TRUE, x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
	
INSERT INTO SEC_USR_ROL_ASSOC_TBL (USR_ID, ROL_ID)
	SELECT USR_ID, ROL_ID FROM SEC_USR_TBL, SEC_ROL_TBL 
	WHERE SEC_USR_TBL.USR_NAME = 'Bob' AND SEC_ROL_TBL.ROL_Name IN ('USERS');
	
INSERT INTO SEC_USR_TBL (USR_NAME, SEC_STMP, PASSWD, EMAIL, PHN_NUM, EMAIL_CNF, PHN_CNF, CRT_PROV_ID)
	VALUES ('Allison', randomblob(16), '59ff5973691ff75f8baa45f1e38fae24875f77ef00987ed22b02df075fb144f9', 'allison@marc-hi.ca', 'tel:+19055751212;ext=4085', TRUE, TRUE, x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
	
INSERT INTO SEC_USR_ROL_ASSOC_TBL (USR_ID, ROL_ID)
	SELECT USR_ID, ROL_ID FROM SEC_USR_TBL, SEC_ROL_TBL 
	WHERE SEC_USR_TBL.USR_NAME = 'Allison' AND SEC_ROL_TBL.ROL_Name IN ('CLINICAL_STAFF');
	
INSERT INTO SEC_APP_TBL (APP_PUB_ID, APP_SCRT, CRT_PROV_ID)
	VALUES ('fiddler','0180cad1928b9b9887a60a123920a793e7aa7cd339577876f0c233fa2b9fb7d6', x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
	
INSERT INTO SEC_APP_POL_ASSOC_TBL(APP_ID, POL_ID, POL_ACT)
	SELECT APP_ID, POL_ID, 2 FROM
		SEC_APP_TBL, SEC_POL_TBL
	WHERE
		SEC_APP_TBL.APP_PUB_ID = 'fiddler';
		
INSERT INTO SEC_APP_TBL (APP_PUB_ID, APP_SCRT, CRT_PROV_ID)
	VALUES ('org.santedb.disconnected_client', ('015fe16693e1117c6c235d91dd535302d65e9259720416d606ab1a2b27a37ba3'), x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
	
INSERT INTO SEC_APP_POL_ASSOC_TBL(APP_ID, POL_ID, POL_ACT)
	SELECT APP_ID, POL_ID, 2 FROM
		SEC_APP_TBL, SEC_POL_TBL
	WHERE
		SEC_APP_TBL.APP_PUB_ID = 'org.santedb.disconnected_client';
		
INSERT INTO SEC_APP_TBL (APP_ID, APP_PUB_ID, APP_SCRT, CRT_UTC, CRT_PROV_ID) 
		VALUES (x'1C585A4CEEA667429231B0D3D50CC08B', 'org.santedb.debug', 'cba830db9a6f5a4b638ff95ef70e98aa82d414ac35b351389024ecb6be40ebf0', CURRENT_TIMESTAMP, x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
		

INSERT INTO SEC_APP_POL_ASSOC_TBL(APP_ID, POL_ID, POL_ACT)
	SELECT APP_ID, POL_ID, 2 FROM
		SEC_APP_TBL, SEC_POL_TBL
	WHERE
		SEC_APP_TBL.APP_PUB_ID = 'org.santedb.debug';
		
INSERT INTO SEC_APP_TBL (APP_ID, APP_PUB_ID, APP_SCRT, CRT_UTC, CRT_PROV_ID) 
		VALUES (x'BD3D4C06888F5D4AA1FA3C3A542B5E98', 'org.santedb.administration', '59ff5973691ff75f8baa45f1e38fae24875f77ef00987ed22b02df075fb144f9', CURRENT_TIMESTAMP, x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
		
INSERT INTO SEC_APP_POL_ASSOC_TBL(APP_ID, POL_ID, POL_ACT)
	SELECT APP_ID, POL_ID, 2 FROM
		SEC_APP_TBL, SEC_POL_TBL
	WHERE
		SEC_APP_TBL.APP_PUB_ID = 'org.santedb.administration';
		
	
INSERT INTO SEC_APP_TBL (APP_ID, APP_PUB_ID, APP_SCRT, CRT_UTC, CRT_PROV_ID) 
		VALUES (x'F3A9ECB75E80E94BA5C730E6E495939B', 'org.santedb.disconnected_client.win32', 'd4f8cf183812156e561d390902c092fa4d1b08001ff875a4bd349ed56e1f31d4', CURRENT_TIMESTAMP, x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
		
INSERT INTO SEC_APP_POL_ASSOC_TBL(APP_ID, POL_ID, POL_ACT)
	SELECT APP_ID, POL_ID, 2 FROM
		SEC_APP_TBL, SEC_POL_TBL
	WHERE
		SEC_APP_TBL.APP_PUB_ID = 'org.santedb.disconnected_client.win32';
		
	
--#		
INSERT INTO SEC_APP_TBL (APP_ID, APP_PUB_ID, APP_SCRT, CRT_UTC, CRT_PROV_ID) 
		VALUES (x'F3A9ECFE5E80E94BA5C730E6E495939B', 'org.santedb.disconnected_client.gateway', '015fe16693e1117c6c235d91dd535302d65e9259720416d606ab1a2b27a37ba3', CURRENT_TIMESTAMP, x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');

INSERT INTO SEC_APP_POL_ASSOC_TBL(SEC_POL_INST_ID, APP_ID, POL_ID, POL_ACT)
	SELECT randomblob(16), APP_ID, POL_ID, 2 FROM
		SEC_APP_TBL, SEC_POL_TBL
	WHERE
		SEC_APP_TBL.APP_PUB_ID = 'org.santedb.disconnected_client.gateway';

	

INSERT INTO SEC_APP_TBL (APP_ID,  APP_PUB_ID, APP_SCRT, CRT_PROV_ID)
	VALUES (x'B2CEFDA0D3A2EA11AE5E00155D4F0905', 'org.santedb.disconnected_client.android', ('ec1e5ef79b95cc1e8a5dec7492b9eb7e2b413ad7a45c5637d16c11bb68fcd53c'), x'76A0DCFA90366E4AAF9EF1CD68E8C7E8');
	
INSERT INTO SEC_APP_POL_ASSOC_TBL(APP_ID, POL_ID, POL_ACT)
	SELECT APP_ID, POL_ID, 2 FROM
		SEC_APP_TBL, SEC_POL_TBL
	WHERE
		SEC_APP_TBL.APP_PUB_ID = 'org.santedb.disconnected_client.android';
		