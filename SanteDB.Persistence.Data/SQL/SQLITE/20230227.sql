/** 
 * <feature scope="SanteDB.Persistence.Data" id="20230105" name="Update:Cumulative Update for SQLite" applyRange="0.2.0.0-0.9.0.0" invariantName="sqlite">
 *	<summary>Update:Cumulative update for SQLite</summary>
 *  <isInstalled>SELECT EXISTS (SELECT 1 FROM REL_VRFY_SYSTBL WHERE SRC_CLS_CD_ID = x'B0B0F48CE584224185FE6AFA8240C218')</isInstalled>
 * </feature>
 */
UPDATE ENT_VRSN_TBL SET CLS_CD_ID = x'285C1A4DB7DE1E41B75FD524F90DFA63' WHERE CLS_CD_ID = x'B0B0F48CE584224185FE6AFA8240C218';

INSERT INTO REL_VRFY_SYSTBL (rel_vrfy_id, rel_typ_cd_id, src_cls_cd_id, trg_cls_cd_id, err_desc) 
SELECT (randomblob(16)), rel_typ_cd_id, CASE WHEN SRC_CLS_CD_ID = x'B0B0F48CE584224185FE6AFA8240C218' THEN x'285C1A4DB7DE1E41B75FD524F90DFA63' ELSE SRC_CLS_CD_ID END,
CASE WHEN TRG_CLS_CD_ID = x'B0B0F48CE584224185FE6AFA8240C218' THEN x'285C1A4DB7DE1E41B75FD524F90DFA63' ELSE TRG_CLS_CD_ID END, err_desc
FROM REL_VRFY_SYSTBL
WHERE SRC_CLS_CD_ID = x'B0B0F48CE584224185FE6AFA8240C218' OR TRG_CLS_CD_ID = x'B0B0F48CE584224185FE6AFA8240C218' 
ON CONFLICT DO NOTHING;

DELETE FROM REL_VRFY_SYSTBL WHERE SRC_CLS_CD_ID = x'B0B0F48CE584224185FE6AFA8240C218' OR TRG_CLS_CD_ID = x'B0B0F48CE584224185FE6AFA8240C218' ;


