/** 
 * <feature scope="SanteDB.Persistence.Data" id="20250508-01" name="Update:20250508-01"   invariantName="npgsql" >
 *	<summary>Update: Add states and status concepts for scheduled notifications</summary>
 *	<isInstalled>select ck_patch('20250508-01')</isInstalled>
 * </feature>
 */

BEGIN TRANSACTION;

INSERT INTO cd_tbl (CD_ID) VALUES ('1E029E45-734E-4514-9CA4-E1E487883562') ON CONFLICT DO NOTHING;
INSERT INTO cd_vrsn_tbl (CD_ID, STS_CD_ID, CLS_ID, CRT_PROV_ID, CRT_UTC, MNEMONIC, HEAD) VALUES ('1E029E45-734E-4514-9CA4-E1E487883562', 'C8064CBD-FA06-4530-B430-1A52F1530C27', '0D6B3439-C9BE-4480-AF39-EEB457C052D0', 'FADCA076-3690-4A6E-AF9E-F1CD68E8C7E8', CURRENT_TIMESTAMP, 'NotificationState-Disabled', TRUE) ON CONFLICT DO NOTHING;
INSERT INTO cd_name_tbl (CD_ID, EFFT_VRSN_SEQ_ID, LANG_CS, VAL)
	SELECT '1E029E45-734E-4514-9CA4-E1E487883562', vrsn_seq_id, 'EN', 'Disabled'
	FROM cd_vrsn_tbl WHERE CD_ID = '1E029E45-734E-4514-9CA4-E1E487883562' ON CONFLICT DO NOTHING;

INSERT INTO cd_tbl (CD_ID) VALUES ('AC843892-F7E0-47B6-8F84-11C14E7E96C6') ON CONFLICT DO NOTHING;
INSERT INTO cd_vrsn_tbl (CD_ID, STS_CD_ID, CLS_ID, CRT_PROV_ID, CRT_UTC, MNEMONIC, HEAD) VALUES ('AC843892-F7E0-47B6-8F84-11C14E7E96C6', 'C8064CBD-FA06-4530-B430-1A52F1530C27', '0D6B3439-C9BE-4480-AF39-EEB457C052D0', 'FADCA076-3690-4A6E-AF9E-F1CD68E8C7E8', CURRENT_TIMESTAMP, 'NotificationState-NotYetRun', TRUE) ON CONFLICT DO NOTHING;
INSERT INTO cd_name_tbl (CD_ID, EFFT_VRSN_SEQ_ID, LANG_CS, VAL)
	SELECT 'AC843892-F7E0-47B6-8F84-11C14E7E96C6', vrsn_seq_id, 'EN', 'Not yet run'
	FROM cd_vrsn_tbl WHERE CD_ID = 'AC843892-F7E0-47B6-8F84-11C14E7E96C6' ON CONFLICT DO NOTHING;

INSERT INTO cd_tbl (CD_ID) VALUES ('92455ACD-ECC2-4E89-9227-94B77B27420D') ON CONFLICT DO NOTHING;
INSERT INTO cd_vrsn_tbl (CD_ID, STS_CD_ID, CLS_ID, CRT_PROV_ID, CRT_UTC, MNEMONIC, HEAD) VALUES ('92455ACD-ECC2-4E89-9227-94B77B27420D', 'C8064CBD-FA06-4530-B430-1A52F1530C27', '0D6B3439-C9BE-4480-AF39-EEB457C052D0', 'FADCA076-3690-4A6E-AF9E-F1CD68E8C7E8', CURRENT_TIMESTAMP, 'NotificationState-CompletedWithErrors', TRUE) ON CONFLICT DO NOTHING;
INSERT INTO cd_name_tbl (CD_ID, EFFT_VRSN_SEQ_ID, LANG_CS, VAL)
	SELECT '92455ACD-ECC2-4E89-9227-94B77B27420D', vrsn_seq_id, 'EN', 'Completed with errors'
	FROM cd_vrsn_tbl WHERE CD_ID = '92455ACD-ECC2-4E89-9227-94B77B27420D' ON CONFLICT DO NOTHING;

INSERT INTO cd_tbl (CD_ID) VALUES ('2726BC79-A55A-4FEA-BE2C-627265872DB5') ON CONFLICT DO NOTHING;
INSERT INTO cd_vrsn_tbl (CD_ID, STS_CD_ID, CLS_ID, CRT_PROV_ID, CRT_UTC, MNEMONIC, HEAD) VALUES ('2726BC79-A55A-4FEA-BE2C-627265872DB5', 'C8064CBD-FA06-4530-B430-1A52F1530C27', '0D6B3439-C9BE-4480-AF39-EEB457C052D0', 'FADCA076-3690-4A6E-AF9E-F1CD68E8C7E8', CURRENT_TIMESTAMP, 'NotificationState-CompletedSuccessfully', TRUE) ON CONFLICT DO NOTHING;
INSERT INTO cd_name_tbl (CD_ID, EFFT_VRSN_SEQ_ID, LANG_CS, VAL)
	SELECT '2726BC79-A55A-4FEA-BE2C-627265872DB5', vrsn_seq_id, 'EN', 'Completed successfully'
	FROM cd_vrsn_tbl WHERE CD_ID = '2726BC79-A55A-4FEA-BE2C-627265872DB5' ON CONFLICT DO NOTHING;

INSERT INTO cd_tbl (CD_ID) VALUES ('0536DD0B-3418-4582-88EA-35EA6FC76595') ON CONFLICT DO NOTHING;
INSERT INTO cd_vrsn_tbl (CD_ID, STS_CD_ID, CLS_ID, CRT_PROV_ID, CRT_UTC, MNEMONIC, HEAD) VALUES ('0536DD0B-3418-4582-88EA-35EA6FC76595', 'C8064CBD-FA06-4530-B430-1A52F1530C27', '0D6B3439-C9BE-4480-AF39-EEB457C052D0', 'FADCA076-3690-4A6E-AF9E-F1CD68E8C7E8', CURRENT_TIMESTAMP, 'NotificationState-Error', TRUE) ON CONFLICT DO NOTHING;
INSERT INTO cd_name_tbl (CD_ID, EFFT_VRSN_SEQ_ID, LANG_CS, VAL)
	SELECT '0536DD0B-3418-4582-88EA-35EA6FC76595', vrsn_seq_id, 'EN', 'Error'
	FROM cd_vrsn_tbl WHERE CD_ID = '0536DD0B-3418-4582-88EA-35EA6FC76595' ON CONFLICT DO NOTHING;

INSERT INTO cd_tbl (CD_ID) VALUES ('0AC6638B-4E72-466A-A20F-1ADB3B8F2139') ON CONFLICT DO NOTHING;
INSERT INTO cd_vrsn_tbl (CD_ID, STS_CD_ID, CLS_ID, CRT_PROV_ID, CRT_UTC, MNEMONIC, HEAD) VALUES ('0AC6638B-4E72-466A-A20F-1ADB3B8F2139', 'C8064CBD-FA06-4530-B430-1A52F1530C27', '0D6B3439-C9BE-4480-AF39-EEB457C052D0', 'FADCA076-3690-4A6E-AF9E-F1CD68E8C7E8', CURRENT_TIMESTAMP, 'NotificationStatus-Draft', TRUE) ON CONFLICT DO NOTHING;
INSERT INTO cd_name_tbl (CD_ID, EFFT_VRSN_SEQ_ID, LANG_CS, VAL)
	SELECT '0AC6638B-4E72-466A-A20F-1ADB3B8F2139', vrsn_seq_id, 'EN', 'Draft'
	FROM cd_vrsn_tbl WHERE CD_ID = '0AC6638B-4E72-466A-A20F-1ADB3B8F2139' ON CONFLICT DO NOTHING;

INSERT INTO cd_tbl (CD_ID) VALUES ('1FAFD226-CAD4-47F2-87E6-7C8F3E9E3B6F') ON CONFLICT DO NOTHING;
INSERT INTO cd_vrsn_tbl (CD_ID, STS_CD_ID, CLS_ID, CRT_PROV_ID, CRT_UTC, MNEMONIC, HEAD) VALUES ('1FAFD226-CAD4-47F2-87E6-7C8F3E9E3B6F', 'C8064CBD-FA06-4530-B430-1A52F1530C27', '0D6B3439-C9BE-4480-AF39-EEB457C052D0', 'FADCA076-3690-4A6E-AF9E-F1CD68E8C7E8', CURRENT_TIMESTAMP, 'NotificationStatus-Published', TRUE) ON CONFLICT DO NOTHING;
INSERT INTO cd_name_tbl (CD_ID, EFFT_VRSN_SEQ_ID, LANG_CS, VAL)
	SELECT '1FAFD226-CAD4-47F2-87E6-7C8F3E9E3B6F', vrsn_seq_id, 'EN', 'Published'
	FROM cd_vrsn_tbl WHERE CD_ID = '1FAFD226-CAD4-47F2-87E6-7C8F3E9E3B6F' ON CONFLICT DO NOTHING;
	
SELECT REG_PATCH('20250508-01');

COMMIT;